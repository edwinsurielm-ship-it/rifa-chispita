<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>T칩mbola</title>

<style>
body{
    font-family: Arial;
    text-align:center;
}

.grid{
    display:grid;
    grid-template-columns:repeat(10,1fr);
    gap:5px;
    max-width:600px;
    margin:auto;
}

.num{
    padding:10px;
    border:1px solid black;
    cursor:pointer;
}

.vendido{
    background:red;
    color:white;
}

.ganador{
    background:green;
    color:white;
    font-weight:bold;
}

#adminPanel{
    margin-bottom:20px;
}
</style>
</head>

<body>

<h2>T칩mbola</h2>

<div id="adminPanel" style="display:none;">
    <button onclick="girar()">游꿢 GIRAR T칍MBOLA</button>
</div>

<h3 id="resultado"></h3>

<div class="grid" id="numeros"></div>

<script>

// Detecta si es celular o laptop autom치ticamente
const isAdmin = !/Mobi|Android|iPhone/i.test(navigator.userAgent);

if(isAdmin){
    document.getElementById("adminPanel").style.display="block";
}

let vendidos = JSON.parse(localStorage.getItem("vendidos")) || [];
let ganador = localStorage.getItem("ganador");

const cont = document.getElementById("numeros");

for(let i=1;i<=100;i++){
    const d = document.createElement("div");
    d.className="num";
    d.innerText=i;

    if(vendidos.includes(i)) d.classList.add("vendido");
    if(ganador == i) d.classList.add("ganador");

    // SOLO ADMIN puede marcar vendidos
    if(isAdmin){
        d.onclick=()=>{
            if(vendidos.includes(i)){
                vendidos = vendidos.filter(n=>n!=i);
            }else{
                vendidos.push(i);
            }
            localStorage.setItem("vendidos",JSON.stringify(vendidos));
            location.reload();
        }
    }else{
        d.style.cursor="default";
    }

    cont.appendChild(d);
}

if(ganador){
    document.getElementById("resultado").innerText="GANADOR: "+ganador;
}

function girar(){
    const disponibles = [];
    for(let i=1;i<=100;i++){
        if(!vendidos.includes(i)) disponibles.push(i);
    }

    if(disponibles.length === 0){
        alert("Todos los n칰meros est치n vendidos");
        return;
    }

    const g = disponibles[Math.floor(Math.random()*disponibles.length)];
    localStorage.setItem("ganador",g);
    location.reload();
}
</script>

</body>
</html>
